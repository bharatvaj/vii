# $Header: /usr/build/vile/vile/filters/RCS/makefile.in,v 1.83 2010/04/04 23:08:35 tom Exp $
#

#### Start of system configuration section. ####



top_srcdir	= ..
srcdir		= .

CC		= gcc
CPP		= gcc -E
LINK		=  $(CC) $(CFLAGS)
INSTALL		= /usr/local/bin/ginstall -c
INSTALL_PROGRAM	= ${INSTALL}
INSTALL_DATA	= ${INSTALL} -m 644

EXTRA_CFLAGS	= 
CFLAGS		= -g -O2 $(EXTRA_CFLAGS)
LDFLAGS		=  -L/usr/local/opt/opencv@3/lib 
LIBS		= -ltermcap -lcurses  

LINT		= lint
CTAGS		= ctags
ETAGS		= etags

AR		= ar
AR_OPTS		= rv
RANLIB		= ranlib
LEX		= flex
LEXLIB		= -ll
LEX_OUTPUT_ROOT	= lex.yy

SH_CFLAGS	= 
SH_LDFLAGS	= 

x		= 
o		= .o
so		= .so

SCREEN		= tcap
TARGET		= vile$x

prefix		= /usr/local
exec_prefix	= ${prefix}

bindir		= ${exec_prefix}/bin
libdir		= ${exec_prefix}/lib

filters_bindir	= $(libdir)/vile
datadir		= ${prefix}/share/vile

#### End of system configuration section. ####

SHELL		= /bin/sh
RM              = rm -f

QUOTDEFS	= -DVILE_STARTUP_PATH=\"$(datadir)\"
CPPFLAGS	= -I. -I.. -I$(top_srcdir)/filters -I$(top_srcdir) -DHAVE_CONFIG_H -I/usr/local/opt/opencv@3/include  -D_DARWIN_C_SOURCE

BINDIR		= $(DESTDIR)$(bindir)
LIBDIR		= $(DESTDIR)$(libdir)
DATADIR		= $(DESTDIR)$(datadir)

FILTERS_BINDIR	= $(DESTDIR)/$(filters_bindir)

INSTALL_DIRS    = $(FILTERS_BINDIR) $(DATADIR)

LF_DEPS = filterio$o filters$o
LF_ARGS = $(LF_DEPS) $(LEXLIB)

CF_DEPS = filterio$o filters$o
CF_ARGS = $(CF_DEPS)

# No lists generated by filters/mk-1st.awk for built-in filters
# No lists generated by filters/mk-1st.awk for external filters
# No lists generated by filters/mk-1st.awk for loadable filters
# $Header: /usr/build/vile/vile/filters/RCS/makefile.2nd,v 1.20 2010/05/13 21:08:46 tom Exp $
#

.SUFFIXES: .l .c .i $o

# This rule is only used for external filters since we generate explicit
# rules to rename the entrypoints of each built-in or loadable filter.
.l$o:
	@echo compiling $<
	@echo "#include <flt_defs.h>" > $*.c
	@ $(LEX) -t $< >> $*.c
	@$(CC) -c $(CPPFLAGS) $(CFLAGS) $*.c
	-$(RM) $*.c

.l.c:
	@echo compiling $<
	@echo "#include <flt_defs.h>" > $*.c
	@ $(LEX) -t $< >> $*.c

.c.i:
	@echo compiling $<
	@$(CPP) -C $(CPPFLAGS) $(QUOTDEFS) $< >$@
.c$o:
	@echo compiling $<
	@$(CC) -c $(CPPFLAGS) $(QUOTDEFS) $(CFLAGS) $<

LF_DEPS = filterio$o filters$o
LF_ARGS = $(LF_DEPS) $(LEXLIB)

CF_DEPS = filterio$o filters$o
CF_ARGS = $(CF_DEPS)

PROGS	= \
	atr2ansi$x \
	atr2html$x \
	atr2text$x \
	vile-crypt$x \
	vile-manfilt$x

ALL = 	$(PROGS) $(C_ALL) $(C_DYN)  $(LEX_ALL) $(LEX_DYN)

# library objects:
LOBJS = filters$o $(C_OBJ)  $(LEX_OBJ)

all:	$(ALL) 

check: $(TARGET)
	@echo Sorry, no batch tests available.

INSTALL_FILES = \
	$(FILTERS_BINDIR)/atr2ansi$x \
	$(FILTERS_BINDIR)/atr2html$x \
	$(FILTERS_BINDIR)/atr2text$x \
	$(FILTERS_BINDIR)/vile-crypt$x \
	$(FILTERS_BINDIR)/vile-manfilt$x \
	$(DATADIR)/filters.rc \
	$(DATADIR)/spell.rc $(INSTALL_C) $(INSTALL_DYN_C)  $(INSTALL_LEX) $(INSTALL_DYN_LEX) 

install-full \
install :: $(INSTALL_DIRS) $(INSTALL_FILES)

installdirs: $(INSTALL_DIRS)

uninstall-full \
uninstall ::
	-$(RM) $(INSTALL_FILES)

# defining this target, though technically (i think) correct, causes
#  the make to fail on machines which don't have autoconf, i.e. most of them.
#configure: configure.in aclocal.m4
#	autoconf

config.status: configure
	$(SHELL) ./config.status --recheck

mostlyclean:
	-$(RM) *.[oi] *$(so) o$(TARGET) $(BUILTSRCS) core *~ *.BAK $(LEX_OUTPUT_ROOT).* *.bb* *.da *.gcov 

clean: mostlyclean
	-$(SHELL) -c 'for L in *.l;do C=`basename $$L .l`.c;test -f $$C && rm -f $$C; done; exit 0'
	-$(RM) $(ALL)

distclean: clean
	-$(RM) makefile config.status config.cache config.log config.h

realclean: distclean
	-$(RM) tags TAGS

lint:
	-$(SHELL) -c 'for L in $(C_OBJ) $(CF_DEPS); do \
			N=`basename $$L $o`.c; \
			$(LINT) $(CPPFLAGS) $$N; \
		done'
	-$(SHELL) -c 'for L in $(LEX_OBJ); do \
			N=`basename $$L $o`.c; \
			make $$N && $(LINT) $(CPPFLAGS) $$N; \
		done'

tags:
	$(CTAGS) *.[chyl]

TAGS:
	$(ETAGS) *.[chyl]

dotags:
	dotags *.[chyl]

libvlflt.a : $(LOBJS)
	$(AR) $(AR_OPTS) $@ $(LOBJS)
	$(RANLIB) $@

atr2ansi$x : atr2ansi$o	unfilter$o ; $(LINK) -o $@ atr2ansi$o unfilter$o $(CFLAGS) $(LDFLAGS) $(LIBS)
atr2html$x : atr2html$o	unfilter$o ; $(LINK) -o $@ atr2html$o unfilter$o $(CFLAGS) $(LDFLAGS) $(LIBS)
atr2text$x : atr2text$o	unfilter$o ; $(LINK) -o $@ atr2text$o unfilter$o $(CFLAGS) $(LDFLAGS) $(LIBS)
vile-crypt$x :	ecrypt$o	; $(LINK) -o $@ ecrypt$o $(CFLAGS) $(LDFLAGS) $(LIBS)
vile-manfilt$x : manfilt$o	; $(LINK) -o $@ manfilt$o $(CFLAGS) $(LDFLAGS) $(LIBS)

$(FILTERS_BINDIR)/atr2ansi$x :	   atr2ansi$x		; $(INSTALL) $? $@
$(FILTERS_BINDIR)/atr2html$x :	   atr2html$x		; $(INSTALL) $? $@
$(FILTERS_BINDIR)/atr2text$x :	   atr2text$x		; $(INSTALL) $? $@
$(FILTERS_BINDIR)/vile-crypt$x :   vile-crypt$x		; $(INSTALL) $? $@
$(FILTERS_BINDIR)/vile-manfilt$x : vile-manfilt$x	; $(INSTALL) $? $@

$(DATADIR)/filters.rc :		$(srcdir)/filters.rc	; $(INSTALL_DATA) $? $@
$(DATADIR)/spell.rc :		$(srcdir)/spell.rc	; $(INSTALL_DATA) $? $@

$(INSTALL_DIRS):
	mkdir -p $@

ALWAYS:

# No lists generated by filters/mk-2nd.awk for built-in filters
# No lists generated by filters/mk-2nd.awk for external filters
# No lists generated by filters/mk-2nd.awk for loadable filters

# Rules generated by filters/mk-key.awk
INSTALL_TEXT = \
	$(DATADIR)/ada.keywords \
	$(DATADIR)/ant.keywords \
	$(DATADIR)/as.keywords \
	$(DATADIR)/as386.keywords \
	$(DATADIR)/asm.keywords \
	$(DATADIR)/au3.keywords \
	$(DATADIR)/awk.keywords \
	$(DATADIR)/basic.keywords \
	$(DATADIR)/bat.keywords \
	$(DATADIR)/bnf.keywords \
	$(DATADIR)/c.keywords \
	$(DATADIR)/cpp.keywords \
	$(DATADIR)/cs.keywords \
	$(DATADIR)/csh.keywords \
	$(DATADIR)/css.keywords \
	$(DATADIR)/cweb.keywords \
	$(DATADIR)/dcl.keywords \
	$(DATADIR)/def.keywords \
	$(DATADIR)/diff.keywords \
	$(DATADIR)/docbook.keywords \
	$(DATADIR)/ecl.keywords \
	$(DATADIR)/esql.keywords \
	$(DATADIR)/est.keywords \
	$(DATADIR)/fdl.keywords \
	$(DATADIR)/hs.keywords \
	$(DATADIR)/html.keywords \
	$(DATADIR)/imake.keywords \
	$(DATADIR)/ini.keywords \
	$(DATADIR)/iss.keywords \
	$(DATADIR)/java.keywords \
	$(DATADIR)/js.keywords \
	$(DATADIR)/latex.keywords \
	$(DATADIR)/lex.keywords \
	$(DATADIR)/lisp.keywords \
	$(DATADIR)/lua.keywords \
	$(DATADIR)/m4.keywords \
	$(DATADIR)/mail.keywords \
	$(DATADIR)/mailcap.keywords \
	$(DATADIR)/make.keywords \
	$(DATADIR)/mcrl.keywords \
	$(DATADIR)/midl.keywords \
	$(DATADIR)/mvn.keywords \
	$(DATADIR)/nr.keywords \
	$(DATADIR)/nsis.keywords \
	$(DATADIR)/objc.keywords \
	$(DATADIR)/pas.keywords \
	$(DATADIR)/pc.keywords \
	$(DATADIR)/perl.keywords \
	$(DATADIR)/php.keywords \
	$(DATADIR)/pot.keywords \
	$(DATADIR)/prolog.keywords \
	$(DATADIR)/ps.keywords \
	$(DATADIR)/py.keywords \
	$(DATADIR)/rb.keywords \
	$(DATADIR)/rc.keywords \
	$(DATADIR)/rcs.keywords \
	$(DATADIR)/rexx.keywords \
	$(DATADIR)/rpm.keywords \
	$(DATADIR)/rtf.keywords \
	$(DATADIR)/sccs.keywords \
	$(DATADIR)/scheme.keywords \
	$(DATADIR)/sh.keywords \
	$(DATADIR)/sml.keywords \
	$(DATADIR)/sql.keywords \
	$(DATADIR)/syntax.keywords \
	$(DATADIR)/tags.keywords \
	$(DATADIR)/tbl.keywords \
	$(DATADIR)/tc.keywords \
	$(DATADIR)/tcl.keywords \
	$(DATADIR)/tex.keywords \
	$(DATADIR)/texi.keywords \
	$(DATADIR)/ti.keywords \
	$(DATADIR)/vb.keywords \
	$(DATADIR)/vb6.keywords \
	$(DATADIR)/vbs.keywords \
	$(DATADIR)/vile.keywords \
	$(DATADIR)/vim.keywords \
	$(DATADIR)/vlog.keywords \
	$(DATADIR)/wbt.keywords \
	$(DATADIR)/xml.keywords \
	$(DATADIR)/xq.keywords \
	$(DATADIR)/xres.keywords \
	$(DATADIR)/xs.keywords \
	$(DATADIR)/xsl.keywords \
	$(DATADIR)/yacc.keywords

install :: $(INSTALL_TEXT)

uninstall ::
	-$(RM) $(INSTALL_TEXT)

$(DATADIR)/ada.keywords :	$(srcdir)/ada.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/ant.keywords :	$(srcdir)/ant.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/as.keywords :	$(srcdir)/as.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/as386.keywords :	$(srcdir)/as386.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/asm.keywords :	$(srcdir)/asm.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/au3.keywords :	$(srcdir)/au3.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/awk.keywords :	$(srcdir)/awk.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/basic.keywords :	$(srcdir)/basic.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/bat.keywords :	$(srcdir)/bat.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/bnf.keywords :	$(srcdir)/bnf.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/c.keywords :		$(srcdir)/c.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/cpp.keywords :	$(srcdir)/cpp.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/cs.keywords :	$(srcdir)/cs.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/csh.keywords :	$(srcdir)/csh.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/css.keywords :	$(srcdir)/css.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/cweb.keywords :	$(srcdir)/cweb.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/dcl.keywords :	$(srcdir)/dcl.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/def.keywords :	$(srcdir)/def.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/diff.keywords :	$(srcdir)/diff.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/docbook.keywords :	$(srcdir)/docbook.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/ecl.keywords :	$(srcdir)/ecl.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/esql.keywords :	$(srcdir)/esql.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/est.keywords :	$(srcdir)/est.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/fdl.keywords :	$(srcdir)/fdl.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/hs.keywords :	$(srcdir)/hs.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/html.keywords :	$(srcdir)/html.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/imake.keywords :	$(srcdir)/imake.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/ini.keywords :	$(srcdir)/ini.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/iss.keywords :	$(srcdir)/iss.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/java.keywords :	$(srcdir)/java.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/js.keywords :	$(srcdir)/js.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/latex.keywords :	$(srcdir)/latex.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/lex.keywords :	$(srcdir)/lex.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/lisp.keywords :	$(srcdir)/lisp.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/lua.keywords :	$(srcdir)/lua.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/m4.keywords :	$(srcdir)/m4.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/mail.keywords :	$(srcdir)/mail.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/mailcap.keywords :	$(srcdir)/mailcap.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/make.keywords :	$(srcdir)/make.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/mcrl.keywords :	$(srcdir)/mcrl.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/midl.keywords :	$(srcdir)/midl.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/mvn.keywords :	$(srcdir)/mvn.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/nr.keywords :	$(srcdir)/nr.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/nsis.keywords :	$(srcdir)/nsis.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/objc.keywords :	$(srcdir)/objc.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/pas.keywords :	$(srcdir)/pas.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/pc.keywords :	$(srcdir)/pc.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/perl.keywords :	$(srcdir)/perl.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/php.keywords :	$(srcdir)/php.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/pot.keywords :	$(srcdir)/pot.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/prolog.keywords :	$(srcdir)/prolog.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/ps.keywords :	$(srcdir)/ps.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/py.keywords :	$(srcdir)/py.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/rb.keywords :	$(srcdir)/rb.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/rc.keywords :	$(srcdir)/rc.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/rcs.keywords :	$(srcdir)/rcs.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/rexx.keywords :	$(srcdir)/rexx.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/rpm.keywords :	$(srcdir)/rpm.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/rtf.keywords :	$(srcdir)/rtf.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/sccs.keywords :	$(srcdir)/sccs.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/scheme.keywords :	$(srcdir)/scheme.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/sh.keywords :	$(srcdir)/sh.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/sml.keywords :	$(srcdir)/sml.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/sql.keywords :	$(srcdir)/sql.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/syntax.keywords :	$(srcdir)/syntax.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/tags.keywords :	$(srcdir)/tags.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/tbl.keywords :	$(srcdir)/tbl.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/tc.keywords :	$(srcdir)/tc.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/tcl.keywords :	$(srcdir)/tcl.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/tex.keywords :	$(srcdir)/tex.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/texi.keywords :	$(srcdir)/texi.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/ti.keywords :	$(srcdir)/ti.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/vb.keywords :	$(srcdir)/vb.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/vb6.keywords :	$(srcdir)/vb6.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/vbs.keywords :	$(srcdir)/vbs.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/vile.keywords :	$(srcdir)/vile.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/vim.keywords :	$(srcdir)/vim.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/vlog.keywords :	$(srcdir)/vlog.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/wbt.keywords :	$(srcdir)/wbt.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/xml.keywords :	$(srcdir)/xml.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/xq.keywords :	$(srcdir)/xq.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/xres.keywords :	$(srcdir)/xres.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/xs.keywords :	$(srcdir)/xs.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/xsl.keywords :	$(srcdir)/xsl.key ; 	$(INSTALL_DATA) $? $@
$(DATADIR)/yacc.keywords :	$(srcdir)/yacc.key ; 	$(INSTALL_DATA) $? $@
